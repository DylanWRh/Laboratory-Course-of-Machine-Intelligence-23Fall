float mailCheckTimeout = 30.0; // how often to check for mail

default
{
    state_entry()
    {
        llSetTimerEvent(mailCheckTimeout);
        llOwnerSay((string)llGetKey());
    }
    
    timer()
    {
        llOwnerSay("Checking for messages");
        llGetNextEmail("", ""); // Get any message available
    }
    
    email(string time, string address, string subject, string body,
        integer num_remaining)
    {
        llOwnerSay("Got a message from: " + address);
        llOwnerSay("Subject: " + subject);
        llOwnerSay(body);

        // if there are any more messages, get the next one
        if (num_remaining > 0) 
        {
            llGetNextEmail("", "");
        }
    }
}